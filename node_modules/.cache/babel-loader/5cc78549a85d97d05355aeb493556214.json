{"ast":null,"code":"var __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\n(function (factory) {\n  if (typeof module === \"object\" && typeof module.exports === \"object\") {\n    var v = factory(require, exports);\n    if (v !== undefined) module.exports = v;\n  } else if (typeof define === \"function\" && define.amd) {\n    define([\"require\", \"exports\", \"../Enums/Directions/OutModeDirection\", \"./NumberUtils\"], factory);\n  }\n})(function (require, exports) {\n  \"use strict\";\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.Utils = void 0;\n\n  const OutModeDirection_1 = require(\"../Enums/Directions/OutModeDirection\");\n\n  const NumberUtils_1 = require(\"./NumberUtils\");\n\n  function rectSideBounce(pSide, pOtherSide, rectSide, rectOtherSide, velocity, factor) {\n    const res = {\n      bounced: false\n    };\n\n    if (pOtherSide.min >= rectOtherSide.min && pOtherSide.min <= rectOtherSide.max && pOtherSide.max >= rectOtherSide.min && pOtherSide.max <= rectOtherSide.max) {\n      if (pSide.max >= rectSide.min && pSide.max <= (rectSide.max + rectSide.min) / 2 && velocity > 0 || pSide.min <= rectSide.max && pSide.min > (rectSide.max + rectSide.min) / 2 && velocity < 0) {\n        res.velocity = velocity * -factor;\n        res.bounced = true;\n      }\n    }\n\n    return res;\n  }\n\n  function checkSelector(element, selectors) {\n    if (selectors instanceof Array) {\n      for (const selector of selectors) {\n        if (element.matches(selector)) {\n          return true;\n        }\n      }\n\n      return false;\n    } else {\n      return element.matches(selectors);\n    }\n  }\n\n  class Utils {\n    static isSsr() {\n      return typeof window === \"undefined\" || !window;\n    }\n\n    static get animate() {\n      return Utils.isSsr() ? callback => setTimeout(callback) : callback => (window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame || window.setTimeout)(callback);\n    }\n\n    static get cancelAnimation() {\n      return Utils.isSsr() ? handle => clearTimeout(handle) : handle => (window.cancelAnimationFrame || window.webkitCancelRequestAnimationFrame || window.mozCancelRequestAnimationFrame || window.oCancelRequestAnimationFrame || window.msCancelRequestAnimationFrame || window.clearTimeout)(handle);\n    }\n\n    static isInArray(value, array) {\n      return value === array || array instanceof Array && array.indexOf(value) > -1;\n    }\n\n    static loadFont(character) {\n      return __awaiter(this, void 0, void 0, function* () {\n        try {\n          yield document.fonts.load(`${character.weight} 36px '${character.font}'`);\n        } catch (_a) {}\n      });\n    }\n\n    static arrayRandomIndex(array) {\n      return Math.floor(Math.random() * array.length);\n    }\n\n    static itemFromArray(array, index, useIndex = true) {\n      const fixedIndex = index !== undefined && useIndex ? index % array.length : Utils.arrayRandomIndex(array);\n      return array[fixedIndex];\n    }\n\n    static isPointInside(point, size, radius, direction) {\n      return Utils.areBoundsInside(Utils.calculateBounds(point, radius !== null && radius !== void 0 ? radius : 0), size, direction);\n    }\n\n    static areBoundsInside(bounds, size, direction) {\n      let inside = true;\n\n      if (!direction || direction === OutModeDirection_1.OutModeDirection.bottom) {\n        inside = bounds.top < size.height;\n      }\n\n      if (inside && (!direction || direction === OutModeDirection_1.OutModeDirection.left)) {\n        inside = bounds.right > 0;\n      }\n\n      if (inside && (!direction || direction === OutModeDirection_1.OutModeDirection.right)) {\n        inside = bounds.left < size.width;\n      }\n\n      if (inside && (!direction || direction === OutModeDirection_1.OutModeDirection.top)) {\n        inside = bounds.bottom > 0;\n      }\n\n      return inside;\n    }\n\n    static calculateBounds(point, radius) {\n      return {\n        bottom: point.y + radius,\n        left: point.x - radius,\n        right: point.x + radius,\n        top: point.y - radius\n      };\n    }\n\n    static loadImage(source) {\n      return new Promise((resolve, reject) => {\n        if (!source) {\n          reject(\"Error tsParticles - No image.src\");\n          return;\n        }\n\n        const image = {\n          source: source,\n          type: source.substr(source.length - 3)\n        };\n        const img = new Image();\n        img.addEventListener(\"load\", () => {\n          image.element = img;\n          resolve(image);\n        });\n        img.addEventListener(\"error\", () => {\n          reject(`Error tsParticles - loading image: ${source}`);\n        });\n        img.src = source;\n      });\n    }\n\n    static downloadSvgImage(source) {\n      return __awaiter(this, void 0, void 0, function* () {\n        if (!source) {\n          throw new Error(\"Error tsParticles - No image.src\");\n        }\n\n        const image = {\n          source: source,\n          type: source.substr(source.length - 3)\n        };\n\n        if (image.type !== \"svg\") {\n          return Utils.loadImage(source);\n        }\n\n        const response = yield fetch(image.source);\n\n        if (!response.ok) {\n          throw new Error(\"Error tsParticles - Image not found\");\n        }\n\n        image.svgData = yield response.text();\n        return image;\n      });\n    }\n\n    static deepExtend(destination, ...sources) {\n      for (const source of sources) {\n        if (source === undefined || source === null) {\n          continue;\n        }\n\n        if (typeof source !== \"object\") {\n          destination = source;\n          continue;\n        }\n\n        const sourceIsArray = Array.isArray(source);\n\n        if (sourceIsArray && (typeof destination !== \"object\" || !destination || !Array.isArray(destination))) {\n          destination = [];\n        } else if (!sourceIsArray && (typeof destination !== \"object\" || !destination || Array.isArray(destination))) {\n          destination = {};\n        }\n\n        for (const key in source) {\n          if (key === \"__proto__\") {\n            continue;\n          }\n\n          const sourceDict = source;\n          const value = sourceDict[key];\n          const isObject = typeof value === \"object\";\n          const destDict = destination;\n          destDict[key] = isObject && Array.isArray(value) ? value.map(v => Utils.deepExtend(destDict[key], v)) : Utils.deepExtend(destDict[key], value);\n        }\n      }\n\n      return destination;\n    }\n\n    static isDivModeEnabled(mode, divs) {\n      return divs instanceof Array ? !!divs.find(t => t.enable && Utils.isInArray(mode, t.mode)) : Utils.isInArray(mode, divs.mode);\n    }\n\n    static divModeExecute(mode, divs, callback) {\n      if (divs instanceof Array) {\n        for (const div of divs) {\n          const divMode = div.mode;\n          const divEnabled = div.enable;\n\n          if (divEnabled && Utils.isInArray(mode, divMode)) {\n            Utils.singleDivModeExecute(div, callback);\n          }\n        }\n      } else {\n        const divMode = divs.mode;\n        const divEnabled = divs.enable;\n\n        if (divEnabled && Utils.isInArray(mode, divMode)) {\n          Utils.singleDivModeExecute(divs, callback);\n        }\n      }\n    }\n\n    static singleDivModeExecute(div, callback) {\n      const selectors = div.selectors;\n\n      if (selectors instanceof Array) {\n        for (const selector of selectors) {\n          callback(selector, div);\n        }\n      } else {\n        callback(selectors, div);\n      }\n    }\n\n    static divMode(divs, element) {\n      if (!element || !divs) {\n        return;\n      }\n\n      if (divs instanceof Array) {\n        return divs.find(d => checkSelector(element, d.selectors));\n      } else if (checkSelector(element, divs.selectors)) {\n        return divs;\n      }\n    }\n\n    static circleBounceDataFromParticle(p) {\n      return {\n        position: p.getPosition(),\n        radius: p.getRadius(),\n        velocity: p.velocity,\n        factor: {\n          horizontal: NumberUtils_1.NumberUtils.getValue(p.particlesOptions.bounce.horizontal),\n          vertical: NumberUtils_1.NumberUtils.getValue(p.particlesOptions.bounce.vertical)\n        }\n      };\n    }\n\n    static circleBounce(p1, p2) {\n      const xVelocityDiff = p1.velocity.horizontal;\n      const yVelocityDiff = p1.velocity.vertical;\n      const pos1 = p1.position;\n      const pos2 = p2.position;\n      const xDist = pos2.x - pos1.x;\n      const yDist = pos2.y - pos1.y;\n\n      if (xVelocityDiff * xDist + yVelocityDiff * yDist >= 0) {\n        const angle = -Math.atan2(pos2.y - pos1.y, pos2.x - pos1.x);\n        const m1 = p1.radius;\n        const m2 = p2.radius;\n        const u1 = NumberUtils_1.NumberUtils.rotateVelocity(p1.velocity, angle);\n        const u2 = NumberUtils_1.NumberUtils.rotateVelocity(p2.velocity, angle);\n        const v1 = NumberUtils_1.NumberUtils.collisionVelocity(u1, u2, m1, m2);\n        const v2 = NumberUtils_1.NumberUtils.collisionVelocity(u2, u1, m1, m2);\n        const vFinal1 = NumberUtils_1.NumberUtils.rotateVelocity(v1, -angle);\n        const vFinal2 = NumberUtils_1.NumberUtils.rotateVelocity(v2, -angle);\n        p1.velocity.horizontal = vFinal1.horizontal * p1.factor.horizontal;\n        p1.velocity.vertical = vFinal1.vertical * p1.factor.vertical;\n        p2.velocity.horizontal = vFinal2.horizontal * p2.factor.horizontal;\n        p2.velocity.vertical = vFinal2.vertical * p2.factor.vertical;\n      }\n    }\n\n    static rectBounce(particle, divBounds) {\n      const pPos = particle.getPosition();\n      const size = particle.getRadius();\n      const bounds = Utils.calculateBounds(pPos, size);\n      const resH = rectSideBounce({\n        min: bounds.left,\n        max: bounds.right\n      }, {\n        min: bounds.top,\n        max: bounds.bottom\n      }, {\n        min: divBounds.left,\n        max: divBounds.right\n      }, {\n        min: divBounds.top,\n        max: divBounds.bottom\n      }, particle.velocity.horizontal, NumberUtils_1.NumberUtils.getValue(particle.particlesOptions.bounce.horizontal));\n\n      if (resH.bounced) {\n        if (resH.velocity !== undefined) {\n          particle.velocity.horizontal = resH.velocity;\n        }\n\n        if (resH.position !== undefined) {\n          particle.position.x = resH.position;\n        }\n      }\n\n      const resV = rectSideBounce({\n        min: bounds.top,\n        max: bounds.bottom\n      }, {\n        min: bounds.left,\n        max: bounds.right\n      }, {\n        min: divBounds.top,\n        max: divBounds.bottom\n      }, {\n        min: divBounds.left,\n        max: divBounds.right\n      }, particle.velocity.vertical, NumberUtils_1.NumberUtils.getValue(particle.particlesOptions.bounce.vertical));\n\n      if (resV.bounced) {\n        if (resV.velocity !== undefined) {\n          particle.velocity.vertical = resV.velocity;\n        }\n\n        if (resV.position !== undefined) {\n          particle.position.y = resV.position;\n        }\n      }\n    }\n\n  }\n\n  exports.Utils = Utils;\n});","map":{"version":3,"sources":["/Users/beetee/Downloads/Bloc/todolist/node_modules/tsparticles/dist/Utils/Utils.js"],"names":["__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","apply","factory","module","exports","v","require","undefined","define","amd","Object","defineProperty","Utils","OutModeDirection_1","NumberUtils_1","rectSideBounce","pSide","pOtherSide","rectSide","rectOtherSide","velocity","factor","res","bounced","min","max","checkSelector","element","selectors","Array","selector","matches","isSsr","window","animate","callback","setTimeout","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","cancelAnimation","handle","clearTimeout","cancelAnimationFrame","webkitCancelRequestAnimationFrame","mozCancelRequestAnimationFrame","oCancelRequestAnimationFrame","msCancelRequestAnimationFrame","isInArray","array","indexOf","loadFont","character","document","fonts","load","weight","font","_a","arrayRandomIndex","Math","floor","random","length","itemFromArray","index","useIndex","fixedIndex","isPointInside","point","size","radius","direction","areBoundsInside","calculateBounds","bounds","inside","OutModeDirection","bottom","top","height","left","right","width","y","x","loadImage","source","image","type","substr","img","Image","addEventListener","src","downloadSvgImage","Error","response","fetch","ok","svgData","text","deepExtend","destination","sources","sourceIsArray","isArray","key","sourceDict","isObject","destDict","map","isDivModeEnabled","mode","divs","find","t","enable","divModeExecute","div","divMode","divEnabled","singleDivModeExecute","d","circleBounceDataFromParticle","p","position","getPosition","getRadius","horizontal","NumberUtils","getValue","particlesOptions","bounce","vertical","circleBounce","p1","p2","xVelocityDiff","yVelocityDiff","pos1","pos2","xDist","yDist","angle","atan2","m1","m2","u1","rotateVelocity","u2","v1","collisionVelocity","v2","vFinal1","vFinal2","rectBounce","particle","divBounds","pPos","resH","resV"],"mappings":"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","sourcesContent":["var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\n(function (factory) {\n    if (typeof module === \"object\" && typeof module.exports === \"object\") {\n        var v = factory(require, exports);\n        if (v !== undefined) module.exports = v;\n    }\n    else if (typeof define === \"function\" && define.amd) {\n        define([\"require\", \"exports\", \"../Enums/Directions/OutModeDirection\", \"./NumberUtils\"], factory);\n    }\n})(function (require, exports) {\n    \"use strict\";\n    Object.defineProperty(exports, \"__esModule\", { value: true });\n    exports.Utils = void 0;\n    const OutModeDirection_1 = require(\"../Enums/Directions/OutModeDirection\");\n    const NumberUtils_1 = require(\"./NumberUtils\");\n    function rectSideBounce(pSide, pOtherSide, rectSide, rectOtherSide, velocity, factor) {\n        const res = { bounced: false };\n        if (pOtherSide.min >= rectOtherSide.min &&\n            pOtherSide.min <= rectOtherSide.max &&\n            pOtherSide.max >= rectOtherSide.min &&\n            pOtherSide.max <= rectOtherSide.max) {\n            if ((pSide.max >= rectSide.min && pSide.max <= (rectSide.max + rectSide.min) / 2 && velocity > 0) ||\n                (pSide.min <= rectSide.max && pSide.min > (rectSide.max + rectSide.min) / 2 && velocity < 0)) {\n                res.velocity = velocity * -factor;\n                res.bounced = true;\n            }\n        }\n        return res;\n    }\n    function checkSelector(element, selectors) {\n        if (selectors instanceof Array) {\n            for (const selector of selectors) {\n                if (element.matches(selector)) {\n                    return true;\n                }\n            }\n            return false;\n        }\n        else {\n            return element.matches(selectors);\n        }\n    }\n    class Utils {\n        static isSsr() {\n            return typeof window === \"undefined\" || !window;\n        }\n        static get animate() {\n            return Utils.isSsr()\n                ? (callback) => setTimeout(callback)\n                : (callback) => (window.requestAnimationFrame ||\n                    window.webkitRequestAnimationFrame ||\n                    window.mozRequestAnimationFrame ||\n                    window.oRequestAnimationFrame ||\n                    window.msRequestAnimationFrame ||\n                    window.setTimeout)(callback);\n        }\n        static get cancelAnimation() {\n            return Utils.isSsr()\n                ? (handle) => clearTimeout(handle)\n                : (handle) => (window.cancelAnimationFrame ||\n                    window.webkitCancelRequestAnimationFrame ||\n                    window.mozCancelRequestAnimationFrame ||\n                    window.oCancelRequestAnimationFrame ||\n                    window.msCancelRequestAnimationFrame ||\n                    window.clearTimeout)(handle);\n        }\n        static isInArray(value, array) {\n            return value === array || (array instanceof Array && array.indexOf(value) > -1);\n        }\n        static loadFont(character) {\n            return __awaiter(this, void 0, void 0, function* () {\n                try {\n                    yield document.fonts.load(`${character.weight} 36px '${character.font}'`);\n                }\n                catch (_a) {\n                }\n            });\n        }\n        static arrayRandomIndex(array) {\n            return Math.floor(Math.random() * array.length);\n        }\n        static itemFromArray(array, index, useIndex = true) {\n            const fixedIndex = index !== undefined && useIndex ? index % array.length : Utils.arrayRandomIndex(array);\n            return array[fixedIndex];\n        }\n        static isPointInside(point, size, radius, direction) {\n            return Utils.areBoundsInside(Utils.calculateBounds(point, radius !== null && radius !== void 0 ? radius : 0), size, direction);\n        }\n        static areBoundsInside(bounds, size, direction) {\n            let inside = true;\n            if (!direction || direction === OutModeDirection_1.OutModeDirection.bottom) {\n                inside = bounds.top < size.height;\n            }\n            if (inside && (!direction || direction === OutModeDirection_1.OutModeDirection.left)) {\n                inside = bounds.right > 0;\n            }\n            if (inside && (!direction || direction === OutModeDirection_1.OutModeDirection.right)) {\n                inside = bounds.left < size.width;\n            }\n            if (inside && (!direction || direction === OutModeDirection_1.OutModeDirection.top)) {\n                inside = bounds.bottom > 0;\n            }\n            return inside;\n        }\n        static calculateBounds(point, radius) {\n            return {\n                bottom: point.y + radius,\n                left: point.x - radius,\n                right: point.x + radius,\n                top: point.y - radius,\n            };\n        }\n        static loadImage(source) {\n            return new Promise((resolve, reject) => {\n                if (!source) {\n                    reject(\"Error tsParticles - No image.src\");\n                    return;\n                }\n                const image = {\n                    source: source,\n                    type: source.substr(source.length - 3),\n                };\n                const img = new Image();\n                img.addEventListener(\"load\", () => {\n                    image.element = img;\n                    resolve(image);\n                });\n                img.addEventListener(\"error\", () => {\n                    reject(`Error tsParticles - loading image: ${source}`);\n                });\n                img.src = source;\n            });\n        }\n        static downloadSvgImage(source) {\n            return __awaiter(this, void 0, void 0, function* () {\n                if (!source) {\n                    throw new Error(\"Error tsParticles - No image.src\");\n                }\n                const image = {\n                    source: source,\n                    type: source.substr(source.length - 3),\n                };\n                if (image.type !== \"svg\") {\n                    return Utils.loadImage(source);\n                }\n                const response = yield fetch(image.source);\n                if (!response.ok) {\n                    throw new Error(\"Error tsParticles - Image not found\");\n                }\n                image.svgData = yield response.text();\n                return image;\n            });\n        }\n        static deepExtend(destination, ...sources) {\n            for (const source of sources) {\n                if (source === undefined || source === null) {\n                    continue;\n                }\n                if (typeof source !== \"object\") {\n                    destination = source;\n                    continue;\n                }\n                const sourceIsArray = Array.isArray(source);\n                if (sourceIsArray && (typeof destination !== \"object\" || !destination || !Array.isArray(destination))) {\n                    destination = [];\n                }\n                else if (!sourceIsArray &&\n                    (typeof destination !== \"object\" || !destination || Array.isArray(destination))) {\n                    destination = {};\n                }\n                for (const key in source) {\n                    if (key === \"__proto__\") {\n                        continue;\n                    }\n                    const sourceDict = source;\n                    const value = sourceDict[key];\n                    const isObject = typeof value === \"object\";\n                    const destDict = destination;\n                    destDict[key] =\n                        isObject && Array.isArray(value)\n                            ? value.map((v) => Utils.deepExtend(destDict[key], v))\n                            : Utils.deepExtend(destDict[key], value);\n                }\n            }\n            return destination;\n        }\n        static isDivModeEnabled(mode, divs) {\n            return divs instanceof Array\n                ? !!divs.find((t) => t.enable && Utils.isInArray(mode, t.mode))\n                : Utils.isInArray(mode, divs.mode);\n        }\n        static divModeExecute(mode, divs, callback) {\n            if (divs instanceof Array) {\n                for (const div of divs) {\n                    const divMode = div.mode;\n                    const divEnabled = div.enable;\n                    if (divEnabled && Utils.isInArray(mode, divMode)) {\n                        Utils.singleDivModeExecute(div, callback);\n                    }\n                }\n            }\n            else {\n                const divMode = divs.mode;\n                const divEnabled = divs.enable;\n                if (divEnabled && Utils.isInArray(mode, divMode)) {\n                    Utils.singleDivModeExecute(divs, callback);\n                }\n            }\n        }\n        static singleDivModeExecute(div, callback) {\n            const selectors = div.selectors;\n            if (selectors instanceof Array) {\n                for (const selector of selectors) {\n                    callback(selector, div);\n                }\n            }\n            else {\n                callback(selectors, div);\n            }\n        }\n        static divMode(divs, element) {\n            if (!element || !divs) {\n                return;\n            }\n            if (divs instanceof Array) {\n                return divs.find((d) => checkSelector(element, d.selectors));\n            }\n            else if (checkSelector(element, divs.selectors)) {\n                return divs;\n            }\n        }\n        static circleBounceDataFromParticle(p) {\n            return {\n                position: p.getPosition(),\n                radius: p.getRadius(),\n                velocity: p.velocity,\n                factor: {\n                    horizontal: NumberUtils_1.NumberUtils.getValue(p.particlesOptions.bounce.horizontal),\n                    vertical: NumberUtils_1.NumberUtils.getValue(p.particlesOptions.bounce.vertical),\n                },\n            };\n        }\n        static circleBounce(p1, p2) {\n            const xVelocityDiff = p1.velocity.horizontal;\n            const yVelocityDiff = p1.velocity.vertical;\n            const pos1 = p1.position;\n            const pos2 = p2.position;\n            const xDist = pos2.x - pos1.x;\n            const yDist = pos2.y - pos1.y;\n            if (xVelocityDiff * xDist + yVelocityDiff * yDist >= 0) {\n                const angle = -Math.atan2(pos2.y - pos1.y, pos2.x - pos1.x);\n                const m1 = p1.radius;\n                const m2 = p2.radius;\n                const u1 = NumberUtils_1.NumberUtils.rotateVelocity(p1.velocity, angle);\n                const u2 = NumberUtils_1.NumberUtils.rotateVelocity(p2.velocity, angle);\n                const v1 = NumberUtils_1.NumberUtils.collisionVelocity(u1, u2, m1, m2);\n                const v2 = NumberUtils_1.NumberUtils.collisionVelocity(u2, u1, m1, m2);\n                const vFinal1 = NumberUtils_1.NumberUtils.rotateVelocity(v1, -angle);\n                const vFinal2 = NumberUtils_1.NumberUtils.rotateVelocity(v2, -angle);\n                p1.velocity.horizontal = vFinal1.horizontal * p1.factor.horizontal;\n                p1.velocity.vertical = vFinal1.vertical * p1.factor.vertical;\n                p2.velocity.horizontal = vFinal2.horizontal * p2.factor.horizontal;\n                p2.velocity.vertical = vFinal2.vertical * p2.factor.vertical;\n            }\n        }\n        static rectBounce(particle, divBounds) {\n            const pPos = particle.getPosition();\n            const size = particle.getRadius();\n            const bounds = Utils.calculateBounds(pPos, size);\n            const resH = rectSideBounce({\n                min: bounds.left,\n                max: bounds.right,\n            }, {\n                min: bounds.top,\n                max: bounds.bottom,\n            }, {\n                min: divBounds.left,\n                max: divBounds.right,\n            }, {\n                min: divBounds.top,\n                max: divBounds.bottom,\n            }, particle.velocity.horizontal, NumberUtils_1.NumberUtils.getValue(particle.particlesOptions.bounce.horizontal));\n            if (resH.bounced) {\n                if (resH.velocity !== undefined) {\n                    particle.velocity.horizontal = resH.velocity;\n                }\n                if (resH.position !== undefined) {\n                    particle.position.x = resH.position;\n                }\n            }\n            const resV = rectSideBounce({\n                min: bounds.top,\n                max: bounds.bottom,\n            }, {\n                min: bounds.left,\n                max: bounds.right,\n            }, {\n                min: divBounds.top,\n                max: divBounds.bottom,\n            }, {\n                min: divBounds.left,\n                max: divBounds.right,\n            }, particle.velocity.vertical, NumberUtils_1.NumberUtils.getValue(particle.particlesOptions.bounce.vertical));\n            if (resV.bounced) {\n                if (resV.velocity !== undefined) {\n                    particle.velocity.vertical = resV.velocity;\n                }\n                if (resV.position !== undefined) {\n                    particle.position.y = resV.position;\n                }\n            }\n        }\n    }\n    exports.Utils = Utils;\n});\n"]},"metadata":{},"sourceType":"script"}